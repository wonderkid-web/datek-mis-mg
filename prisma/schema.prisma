generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Enums for IP Address management
enum IPConnectionType {
  WIFI
  ETHERNET
}

enum IPStatus {
  EMPLOYEE
  GUEST_LAPTOP
  GUEST_PHONE
}

enum IPRole {
  LIST
  FULL_ACCESS
}

model User {
  id               Int               @id @default(autoincrement())
  namaLengkap      String            @map("nama_lengkap") @db.VarChar(255)
  email            String?           @unique @db.VarChar(255)
  departemen       String?           @db.VarChar(100)
  jabatan          String?           @db.VarChar(100)
  lokasiKantor     String?           @map("lokasi_kantor") @db.VarChar(100)
  isActive         Boolean           @default(true) @map("is_active")
  createdAt        DateTime          @default(now()) @map("created_at")
  updatedAt        DateTime          @updatedAt @map("updated_at")
  password         String?           @db.VarChar(100)
  role             String?           @db.VarChar(15)
  assetAssignments AssetAssignment[] @relation("UserAssetAssignments")
  IpAddress        IpAddress[]

  @@map("users")
}

model AssetCategory {
  id     Int     @id @default(autoincrement())
  nama   String  @unique @db.VarChar(100)
  slug   String  @unique @db.VarChar(100)
  assets Asset[]

  @@map("asset_categories")
}

model Asset {
  id               Int               @id @default(autoincrement())
  namaAsset        String            @map("nama_asset") @db.VarChar(255)
  categoryId       Int
  nomorSeri        String            @unique @map("nomor_seri") @db.VarChar(100)
  tanggalPembelian DateTime?         @map("tanggal_pembelian") @db.Date
  tanggalGaransi   DateTime?         @map("tanggal_garansi") @db.Date
  statusAsset      String            @map("status_asset") @db.VarChar(50)
  createdAt        DateTime          @default(now()) @map("created_at")
  updatedAt        DateTime          @updatedAt @map("updated_at")
  lokasiFisik      String?           @map("lokasi_fisik") @db.VarChar(255)
  assignments      AssetAssignment[]
  category         AssetCategory     @relation(fields: [categoryId], references: [id])
  intelNucSpecs    IntelNucSpecs?
  laptopSpecs      LaptopSpecs?
  printerSpecs     PrinterSpecs?
  cctvSpecs        CctvSpecs?

  @@index([categoryId], map: "assets_categoryId_fkey")
  @@map("assets")
}

model AssetAssignment {
  id                   Int                   @id @default(autoincrement())
  assetId              Int
  userId               Int
  catatan              String?               @db.Text
  createdAt            DateTime              @default(now()) @map("created_at")
  updatedAt            DateTime              @updatedAt @map("updated_at")
  nomorAsset           String                @unique @map("nomor_asset") @db.VarChar(50)
  asset                Asset                 @relation(fields: [assetId], references: [id])
  user                 User                  @relation("UserAssetAssignments", fields: [userId], references: [id])
  serviceRecords       ServiceRecord[]
  computerMaintenances ComputerMaintenance[]
  IpAddress            IpAddress[]

  @@index([assetId], map: "asset_assignments_assetId_fkey")
  @@index([userId], map: "asset_assignments_userId_fkey")
  @@map("asset_assignments")
}

model ServiceRecord {
  id                Int             @id @default(autoincrement())
  ticketHelpdesk    String
  repairType        String
  cost              Decimal         @db.Decimal(12, 2)
  remarks           String?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  assetAssignmentId Int
  assetAssignment   AssetAssignment @relation(fields: [assetAssignmentId], references: [id])

  @@index([assetAssignmentId], map: "service_records_assetAssignmentId_fkey")
  @@map("service_records")
}

model LaptopRamOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_ram_options")
}

model LaptopProcessorOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_processor_options")
}

model LaptopStorageTypeOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_storage_type_options")
}

model LaptopOsOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_os_options")
}

model LaptopPowerOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_power_options")
}

model LaptopLicenseKeyOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_license_key_options")
}

model LaptopMicrosoftOfficeOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_microsoft_office_options")
}

model LaptopColorOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_color_options")
}

model LaptopBrandOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_brand_options")
}

model LaptopLicenseOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_licence_options")
}

model LaptopTypeOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(50)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_type_options")
}

model LaptopGraphicOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_graphic_options")
}

model LaptopVgaOption {
  id            Int             @id @default(autoincrement())
  value         String          @unique @db.VarChar(100)
  IntelNucSpecs IntelNucSpecs[]
  laptopSpecs   LaptopSpecs[]

  @@map("laptop_vga_options")
}

model LaptopSpecs {
  assetId                 Int                          @id
  processorOptionId       Int?
  ramOptionId             Int?
  storageTypeOptionId     Int?
  osOptionId              Int?
  portOptionId            Int?
  powerOptionId           Int?
  microsoftOfficeOptionId Int?
  colorOptionId           Int?
  graphicOptionId         Int?
  vgaOptionId             Int?
  macWlan                 String?                      @unique @map("mac_wlan") @db.VarChar(17)
  macLan                  String?                      @unique @map("mac_lan") @db.VarChar(17)
  brandOptionId           Int?
  typeOptionId            Int?
  licenseOptionId         Int?
  LicenseKeyOptionId      Int?
  LicenseKeyOption        LaptopLicenseKeyOption?      @relation(fields: [LicenseKeyOptionId], references: [id])
  asset                   Asset                        @relation(fields: [assetId], references: [id])
  brandOption             LaptopBrandOption?           @relation(fields: [brandOptionId], references: [id])
  colorOption             LaptopColorOption?           @relation(fields: [colorOptionId], references: [id])
  graphicOption           LaptopGraphicOption?         @relation(fields: [graphicOptionId], references: [id])
  licenseOption           LaptopLicenseOption?         @relation(fields: [licenseOptionId], references: [id])
  microsoftOfficeOption   LaptopMicrosoftOfficeOption? @relation(fields: [microsoftOfficeOptionId], references: [id])
  osOption                LaptopOsOption?              @relation(fields: [osOptionId], references: [id])
  powerOption             LaptopPowerOption?           @relation(fields: [powerOptionId], references: [id])
  processorOption         LaptopProcessorOption?       @relation(fields: [processorOptionId], references: [id])
  ramOption               LaptopRamOption?             @relation(fields: [ramOptionId], references: [id])
  storageTypeOption       LaptopStorageTypeOption?     @relation(fields: [storageTypeOptionId], references: [id])
  typeOption              LaptopTypeOption?            @relation(fields: [typeOptionId], references: [id])
  vgaOption               LaptopVgaOption?             @relation(fields: [vgaOptionId], references: [id])

  @@index([brandOptionId], map: "laptop_specs_brandOptionId_fkey")
  @@index([colorOptionId], map: "laptop_specs_colorOptionId_fkey")
  @@index([graphicOptionId], map: "laptop_specs_graphicOptionId_fkey")
  @@index([microsoftOfficeOptionId], map: "laptop_specs_microsoftOfficeOptionId_fkey")
  @@index([osOptionId], map: "laptop_specs_osOptionId_fkey")
  @@index([powerOptionId], map: "laptop_specs_powerOptionId_fkey")
  @@index([processorOptionId], map: "laptop_specs_processorOptionId_fkey")
  @@index([ramOptionId], map: "laptop_specs_ramOptionId_fkey")
  @@index([storageTypeOptionId], map: "laptop_specs_storageTypeOptionId_fkey")
  @@index([typeOptionId], map: "laptop_specs_typeOptionId_fkey")
  @@index([vgaOptionId], map: "laptop_specs_vgaOptionId_fkey")
  @@index([LicenseKeyOptionId], map: "laptop_specs_LicenseKeyOptionId_fkey")
  @@index([licenseOptionId], map: "laptop_specs_licenseOptionId_fkey")
  @@map("laptop_specs")
}

model IntelNucSpecs {
  assetId                 Int                          @id
  processorOptionId       Int?
  ramOptionId             Int?
  storageTypeOptionId     Int?
  licenseOptionId         Int?
  osOptionId              Int?
  portOptionId            Int?
  powerOptionId           Int?
  microsoftOfficeOptionId Int?
  colorOptionId           Int?
  graphicOptionId         Int?
  vgaOptionId             Int?
  macWlan                 String?                      @unique @map("mac_wlan") @db.VarChar(17)
  macLan                  String?                      @unique @map("mac_lan") @db.VarChar(17)
  brandOptionId           Int?
  typeOptionId            Int?
  licenseKeyOptionId      Int?
  asset                   Asset                        @relation(fields: [assetId], references: [id])
  brandOption             LaptopBrandOption?           @relation(fields: [brandOptionId], references: [id])
  colorOption             LaptopColorOption?           @relation(fields: [colorOptionId], references: [id])
  graphicOption           LaptopGraphicOption?         @relation(fields: [graphicOptionId], references: [id])
  LaptopLicenseKeyOption  LaptopLicenseKeyOption?      @relation(fields: [licenseKeyOptionId], references: [id])
  licenseOption           LaptopLicenseOption?         @relation(fields: [licenseOptionId], references: [id])
  microsoftOfficeOption   LaptopMicrosoftOfficeOption? @relation(fields: [microsoftOfficeOptionId], references: [id])
  osOption                LaptopOsOption?              @relation(fields: [osOptionId], references: [id])
  powerOption             LaptopPowerOption?           @relation(fields: [powerOptionId], references: [id])
  processorOption         LaptopProcessorOption?       @relation(fields: [processorOptionId], references: [id])
  ramOption               LaptopRamOption?             @relation(fields: [ramOptionId], references: [id])
  storageTypeOption       LaptopStorageTypeOption?     @relation(fields: [storageTypeOptionId], references: [id])
  typeOption              LaptopTypeOption?            @relation(fields: [typeOptionId], references: [id])
  vgaOption               LaptopVgaOption?             @relation(fields: [vgaOptionId], references: [id])

  @@index([brandOptionId], map: "intel_nuc_specs_brandOptionId_fkey")
  @@index([colorOptionId], map: "intel_nuc_specs_colorOptionId_fkey")
  @@index([graphicOptionId], map: "intel_nuc_specs_graphicOptionId_fkey")
  @@index([microsoftOfficeOptionId], map: "intel_nuc_specs_microsoftOfficeOptionId_fkey")
  @@index([osOptionId], map: "intel_nuc_specs_osOptionId_fkey")
  @@index([powerOptionId], map: "intel_nuc_specs_powerOptionId_fkey")
  @@index([processorOptionId], map: "intel_nuc_specs_processorOptionId_fkey")
  @@index([ramOptionId], map: "intel_nuc_specs_ramOptionId_fkey")
  @@index([storageTypeOptionId], map: "intel_nuc_specs_storageTypeOptionId_fkey")
  @@index([typeOptionId], map: "intel_nuc_specs_typeOptionId_fkey")
  @@index([vgaOptionId], map: "intel_nuc_specs_vgaOptionId_fkey")
  @@index([licenseKeyOptionId], map: "intel_nuc_specs_licenseKeyOptionId_fkey")
  @@index([licenseOptionId], map: "intel_nuc_specs_licenseOptionId_fkey")
  @@map("intel_nuc_specs")
}

model PrinterTypeOption {
  id           Int            @id @default(autoincrement())
  value        String         @unique @db.VarChar(50)
  printerSpecs PrinterSpecs[]

  @@map("printer_type_options")
}

model PrinterBrandOption {
  id           Int            @id @default(autoincrement())
  value        String         @unique @db.VarChar(50)
  printerSpecs PrinterSpecs[]

  @@map("printer_brand_options")
}

model PrinterModelOption {
  id           Int            @id @default(autoincrement())
  value        String         @unique @db.VarChar(50)
  printerSpecs PrinterSpecs[]

  @@map("printer_model_options")
}

model PrinterSpecs {
  assetId       Int                 @id
  typeOptionId  Int?
  brandOptionId Int?
  modelOptionId Int?
  asset         Asset               @relation(fields: [assetId], references: [id])
  brandOption   PrinterBrandOption? @relation(fields: [brandOptionId], references: [id])
  modelOption   PrinterModelOption? @relation(fields: [modelOptionId], references: [id])
  typeOption    PrinterTypeOption?  @relation(fields: [typeOptionId], references: [id])

  @@index([typeOptionId], map: "printer_specs_typeOptionId_fkey")
  @@index([brandOptionId], map: "printer_specs_brandOptionId_fkey")
  @@index([modelOptionId], map: "printer_specs_modelOptionId_fkey")
  @@map("printer_specs")
}

model PrinterRepetitiveMaintenance {
  id           Int      @id @default(autoincrement())
  reportDate   DateTime
  assetDetails String?
  totalPages   Int?
  blackCount   Int?
  yellowCount  Int?
  magentaCount Int?
  cyanCount    Int?
  remarks      String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  catatan      String?
}

model ComputerMaintenance {
  id                Int              @id @default(autoincrement())
  periode           DateTime
  assetAssignmentId Int
  connection        IPConnectionType
  storageSystemC    String?
  storageDataD      String?
  health            String?
  cpuFan            String?
  temperature       Float?
  windowsUpdate     DateTime?
  remarks           String?
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt

  assetAssignment AssetAssignment @relation(fields: [assetAssignmentId], references: [id])

  @@index([assetAssignmentId], map: "computer_maintenances_assetAssignmentId_fkey")
  @@map("computer_maintenances")
}

enum Sbu {
  PT_Mahkota_Group_Tbk
  PT_Karya_Pratama_NiagaJaya
  PT_Karya_Mitra_Andalan
  PT_Intan_Sejati_Andalan
  PT_Intan_Sejati_Andalan_Refinery
  PT_Intan_Sejati_Andalan_KCP
  PT_Intan_Sejati_Andalan_BIOGAS
  PT_Intan_Sejati_Andalan_FOF
  PT_Intan_Sejati_Andalan_SOLVENT
  PT_Intan_Sejati_Andalan_TRAINING_CENTER
  PT_Intan_Sejati_Andalan_SSL
  PT_Dumai_Paricipta_Abadi
  PT_Mutiara_Unggul_Lestari
  PT_Berlian_Inti_Mekar_Siak
  PT_Berlian_Inti_Mekar_Rengat
  PT_Berlian_Inti_Mekar_Palembang
}

model CctvBrand {
  id        Int         @id @default(autoincrement())
  value     String      @unique @db.VarChar(100)
  cctvSpecs CctvSpecs[]

  @@map("cctv_brands")
}

model CctvModel {
  id        Int         @id @default(autoincrement())
  value     String      @unique @db.VarChar(100)
  cctvSpecs CctvSpecs[]

  @@map("cctv_models")
}

model CctvDeviceType {
  id        Int         @id @default(autoincrement())
  value     String      @unique @db.VarChar(100)
  cctvSpecs CctvSpecs[]

  @@map("cctv_device_types")
}

model CctvChannelCamera {
  id        Int         @id @default(autoincrement())
  lokasi    String      @db.VarChar(255)
  sbu       String      @db.VarChar(255)
  cctvSpecs CctvSpecs[]

  @@map("cctv_channel_cameras")
}

model CctvSpecs {
  assetId         Int                @id
  brandId         Int?
  modelId         Int?
  deviceTypeId    Int?
  channelCameraId Int?
  asset           Asset              @relation(fields: [assetId], references: [id])
  brand           CctvBrand?         @relation(fields: [brandId], references: [id])
  model           CctvModel?         @relation(fields: [modelId], references: [id])
  deviceType      CctvDeviceType?    @relation(fields: [deviceTypeId], references: [id])
  channelCamera   CctvChannelCamera? @relation(fields: [channelCameraId], references: [id])

  @@index([brandId])
  @@index([modelId])
  @@index([deviceTypeId])
  @@index([channelCameraId])
  @@map("cctv_specs")
}

// New model for IP Address management
model IpAddress {
  id                Int              @id @default(autoincrement())
  userId            Int
  ip                String           @unique @map("ip_address") @db.VarChar(15)
  connection        IPConnectionType
  status            IPStatus
  role              IPRole
  company           String           @db.VarChar(255)
  assetAssignmentId Int?
  macWlan           String?          @map("mac_wlan") @db.VarChar(17) @default("0.0.0.0.0.0")
  createdAt         DateTime         @default(now()) @map("created_at")
  updatedAt         DateTime         @updatedAt @map("updated_at")

  user            User             @relation(fields: [userId], references: [id])
  assetAssignment AssetAssignment? @relation(fields: [assetAssignmentId], references: [id])

  @@index([userId], map: "ip_addresses_userId_fkey")
  @@index([assetAssignmentId], map: "ip_addresses_assetAssignmentId_fkey")
  @@map("ip_addresses")
}
